<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Express基础 | hailiting Blog</title>
    <meta name="description" content="hailiting Blog">
    
    
    <link rel="preload" href="/hai_blog/assets/css/12.styles.b89cdbfb.css" as="style"><link rel="preload" href="/hai_blog/assets/js/app.baa25a8e.js" as="script"><link rel="preload" href="/hai_blog/assets/js/3.35945d85.js" as="script"><link rel="prefetch" href="/hai_blog/assets/js/7.104529b6.js"><link rel="prefetch" href="/hai_blog/assets/js/1.b4ded722.js"><link rel="prefetch" href="/hai_blog/assets/js/2.de28bf07.js"><link rel="prefetch" href="/hai_blog/assets/js/4.f2a64fdf.js"><link rel="prefetch" href="/hai_blog/assets/js/5.e3639e5a.js"><link rel="prefetch" href="/hai_blog/assets/js/6.53b7e643.js"><link rel="prefetch" href="/hai_blog/assets/js/0.decbf858.js"><link rel="prefetch" href="/hai_blog/assets/js/8.3b5fd8e2.js"><link rel="prefetch" href="/hai_blog/assets/js/9.b1d2fb69.js"><link rel="prefetch" href="/hai_blog/assets/js/10.69d75153.js"><link rel="prefetch" href="/hai_blog/assets/js/11.bbd61bf0.js">
    <link rel="stylesheet" href="/hai_blog/assets/css/12.styles.b89cdbfb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/hai_blog/" class="home-link router-link-active"><!----><span class="site-name">
      hailiting Blog
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><!----></div></header><div class="sidebar-mask"></div><div class="sidebar"><!----><ul class="sidebar-links"><li><a href="/hai_blog/" class="sidebar-link">HTTP协议那些事</a></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>JavaScript</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>notes</span><span class="arrow down"></span></p><ul class="sidebar-group-items"><li><a href="/hai_blog/notes/nodejs.html" class="sidebar-link">NodeJS基础</a></li><li><a href="/hai_blog/notes/express.html" class="active sidebar-link">Express基础</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>dataStructure</span><span class="arrow right"></span></p><!----></div></li></ul></div><div class="page"><div class="content"><h1 id="express基础"><a href="#express基础" aria-hidden="true" class="header-anchor">#</a> Express基础</h1><h4 id="一：express的核心特性："><a href="#一：express的核心特性：" aria-hidden="true" class="header-anchor">#</a> 一：express的核心特性：</h4><p>1，可以设置中间件来响应HTTP请求
2，定义了路由表用于执行不同的HTTP请求动作
3，可以通过向模板传递参数来动态渲染HTML页面</p><div class="language- extra-class"><pre class="language-text"><code>var express = require('express');
var app = express();
app.get('/',function(req,res){
  res.send('hello world')
})
//  启动服务
var server= app.listen(8081,function(){
  var host = server.address().address;
  var port = server.address().port;
  console.log(&quot;应用实例，访问地址为http://%s:%s&quot;,host,port)
})
</code></pre></div><h4 id="二，请求和响应的一些参数"><a href="#二，请求和响应的一些参数" aria-hidden="true" class="header-anchor">#</a> 二，请求和响应的一些参数</h4><h5 id="supervisor-热启动"><a href="#supervisor-热启动" aria-hidden="true" class="header-anchor">#</a> supervisor  =&gt; 热启动</h5><div class="language- extra-class"><pre class="language-text"><code>app.get('/', function (req, res) {
   res.send('qweqw'+req.query.username);
})
app.get('/:id',function(req,res){
	res.send('hello'+req.params.id);
  res.json({
    id: res.params.id
  })
})
</code></pre></div><h5 id="request-和-response对象的具体介绍："><a href="#request-和-response对象的具体介绍：" aria-hidden="true" class="header-anchor">#</a> request 和 response对象的具体介绍：</h5><h6 id="request-对象-（表示http请求，包含请求查询字符串，参数，内容，http头部等属性）"><a href="#request-对象-（表示http请求，包含请求查询字符串，参数，内容，http头部等属性）" aria-hidden="true" class="header-anchor">#</a> request 对象 （表示HTTP请求，包含请求查询字符串，参数，内容，HTTP头部等属性）</h6><p>1，req.app  当callback为外部文件时，用req.app访问express实例
2，req.baseUrl: 获取路由当前安装的URL路径
3，req.body / req.cookies: 获得[请求体] / Cookies
4，req.fresh / req.stale: 判断请求是否还【新鲜】
5，req.hostname / req.ip: 获取主机名和IP地址
6，req.originalUrl: 获取原始请求URL
7，req.params: 获取路由的parameters
8，req.path: 获取请求路径
9，req.protocol: 获取协议类型
10，req.query: 获取URL的查询参数串
11，req.route: 获取当前匹配的路由
12，req.subdomains: 获取子域名
13，req.accepts(): 检查可接受的请求的文档类型
14，req.acceptsCharsets / req.acceptsEncodings / req.acceptsLanguages: 返回指定字符集的可接受字符编码
15，req.get(): 获取指定HTTP的请求体
16，req.is(): 判断请求头Content-Type的MIME类型</p><h6 id="response-对象-（表示http响应，即在接收到请求时向客户端送的http响应数据）"><a href="#response-对象-（表示http响应，即在接收到请求时向客户端送的http响应数据）" aria-hidden="true" class="header-anchor">#</a> response 对象 （表示HTTP响应，即在接收到请求时向客户端送的HTTP响应数据）</h6><p>1，res.app: 同上
2，app.append(): 追加指定HTTP头
3，res.set()在res.append()后将重置之前的设置头
4，res.cookie(name,value[,option]): 设置Cookie
5，opition: domain / expires / httpOnly / maxAge / path / secure / signed
6，res.clearCookie(): 清除cookie
7，res.download(): 传送指定路径文件
8，res.get(): 返回指定的HTTP头
9，res.json(): 传送JSON响应
10，res.jsonp(): 传送JSONP响应
11，res.location(): 只设置响应的Location HTTP头，不设置状态码或close response
12，res.redirect(): 设置响应的Location HTTP头，并设置状态码302
13，res.render(view,[loacals],callback): 渲染一个view同时向callback传递渲染后的字符串，如果渲染过程中有错误发生next(err)将会被自动调用。callback将会被传入一个可能发生的错误以及渲染后的页面，这样就不会自动输出了。
14，res.send(): 传送HTTP响应
15，res,sendFeil(path[,options][,fn]): 传送指定路径文件 -会自动根据文件extension设定Content-Type
16，res.set(): 设置HTTP头，传入object可以一次设置多个头
17，res.status(): 设置HTTP状态码
18，res.type(): 设置Content-Type的MIME类型</p><h4 id="路由"><a href="#路由" aria-hidden="true" class="header-anchor">#</a> 路由</h4><div class="language- extra-class"><pre class="language-text"><code>var express = require('express');
var app = express();
// 主页
app.get('/',function(req,res){
  res.send('Get Hello')
  console.log('index get')
})
// post 请求
app.post('/',function(req,res){
  console.log('主页post请求');
  res.send('Hello post')
})
// /del_user 页面响应
app.get('/del_user',function(req,res){
  console.log('/del_user Get 请求');
  res.send('删除页面');
})
// post 请求
app.post('/del_user',function(req,res){
  console.log('主页post请求');
  res.send('Hellasdasdo post')
})
var server = app.listen(8081, function(){
  &lt;!-- var host = server.address().address
  var port = server.address().port --&gt;
  console.log(213)
})
</code></pre></div><h5 id="静态文件"><a href="#静态文件" aria-hidden="true" class="header-anchor">#</a> 静态文件</h5><div class="language- extra-class"><pre class="language-text"><code>var express = require('express');
var app = express();
app.use(express.static('public'));
app.get('/',function(req,res){
  res.send('Hello World');
})
var server = app.listen(8081,function(){
  var host = server.address().address
  var port = server.address().port
  console.log(host)
})
</code></pre></div><h5 id="get方法"><a href="#get方法" aria-hidden="true" class="header-anchor">#</a> GET方法</h5><div class="language- extra-class"><pre class="language-text"><code>// index.html
&lt;html&gt;
  &lt;style src=&quot;styleSheels/index.css&quot;
  &lt;body&gt;
    &lt;form action=&quot;http://192.168.1.166/process_get&quot; method = &quot;GET&quot;&gt;
      First name: &lt;input type=&quot;text&quot; name = &quot;first_name&quot;&gt;&lt;br/&gt;
      last name: &lt;input type=&quot;text&quot; name = &quot;last_name&quot;&gt;&lt;br/&gt;
      &lt;input type = &quot;submit&quot; value=&quot;Submit&quot;&gt;
    &lt;/form&gt;
  &lt;/body&gt;
&lt;/html&gt;
// server.js
var express = require('express');
var app = express();

app.use(express.static('public'));

app.get('/index.html', function (req, res) {
	res.sendFile(__dirname+'/views/'+'index.html')
})

var server = app.listen(8081, function () {
 
  var host = server.address().address
  var port = server.address().port
 
  console.log(&quot;应用实例，访问地址为 http://%s:%s&quot;, host, port)
 
})
</code></pre></div><h5 id="post方法"><a href="#post方法" aria-hidden="true" class="header-anchor">#</a> POST方法</h5><div class="language- extra-class"><pre class="language-text"><code>// index.html
&lt;html&gt;
  &lt;link rel=&quot;stylesheet&quot; href=&quot;stylesheels/index.css&quot;&gt;
  &lt;body&gt;
    &lt;form action=&quot;http://192.168.1.166:8081/process_post&quot; method = &quot;POST&quot;&gt;
      First name: &lt;input type=&quot;text&quot; name = &quot;first_name&quot;&gt;&lt;br/&gt;
      last name: &lt;input type=&quot;text&quot; name = &quot;last_name&quot;&gt;&lt;br/&gt;
      &lt;input type = &quot;submit&quot; value=&quot;Submit&quot;&gt;
    &lt;/form&gt;
  &lt;/body&gt;
&lt;/html&gt;



// app.js
var express = require('express');
var app = express();
var bodyParser = require('body-parser');

// 创建 application/x-www-form-urlencoded 编辑解析
var urlencodedParser = bodyParser.urlencoded({
    extended: false
})
app.use(express.static('public'));

app.get('/index.html', function(req, res) {
    res.sendFile(__dirname + '/views/' + 'index.html')
})
app.post('/process_post', urlencodedParser, function(req, res) {
    var response = {
        &quot;first_name&quot;: req.body.first_name,
        &quot;last_name&quot;: req.body.last_name
    }
    console.log(response);
    res.end(JSON.stringify(response));
})


var server = app.listen(8081, function() {

    var host = server.address().address
    var port = server.address().port
    console.log(&quot;应用实例，访问地址为 http://%s:%s&quot;, host, port)
})
</code></pre></div><h5 id="文件上传"><a href="#文件上传" aria-hidden="true" class="header-anchor">#</a> 文件上传</h5><div class="language- extra-class"><pre class="language-text"><code>// index.html

</code></pre></div></div><div class="page-edit"><!----><!----></div><div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/hai_blog/notes/nodejs.html" class="prev">
          NodeJS基础
        </a></span><span class="next"><a href="/hai_blog/dataStructure/one.html">
          第一章：绪论
        </a> →
      </span></p></div></div></div></div>
    <script src="/hai_blog/assets/js/3.35945d85.js" defer></script><script src="/hai_blog/assets/js/app.baa25a8e.js" defer></script>
  </body>
</html>
