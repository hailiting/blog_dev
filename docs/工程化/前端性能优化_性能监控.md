# å‰ç«¯æ€§èƒ½ä¼˜åŒ– æ€§èƒ½ç›‘æ§

## é”™è¯¯æ•è·

- `script`æ¯ä¸ªæ˜¯ç‹¬ç«‹æ ‡ç­¾ï¼Œç‹¬ç«‹çš„å—

```html
<body>
  <script>
    error;
    console.log(1);
  </script>
  <script>
    // 2
    console.log(2);
  </script>
</body>
```

- è¯­æ³•é”™è¯¯ï¼Œ`try catch`æ˜¯æ•è·ä¸äº†çš„
- `setTimeout`ç­‰å¼‚æ­¥æ–¹æ³•æ— æ³•æ•è·

```js
try {
  setTimeout(() => {
    error;
  });
} catch (e) {
  console.log("ğŸ‡");
}
//
window.onerror = function(msg, url, row, col, error) {
  console.log("ğŸŒº", msg);
  return true;
};
```

- img èµ„æºå¼•ç”¨é”™è¯¯ç­‰ html è„šæœ¬çš„é”™è¯¯çš„æ•è·

```html
<body>
  <img src="./xx.png" />
  <script>
    window.addEventListener(
      "error",
      function(msg, url, row, col, error) {
        console.log("ğŸŒº", msg);
        return false;
      },
      // æ˜¯å¦å†’æ³¡å»æ¥æ”¶
      true
    );
  </script>
</body>
```

- `promise`é”™è¯¯

```js
window.addEventListener("unhandledrejection", function(e) {
  e.preventDefault();
  console.log(e.reason);
  return true;
});
new Promise((resolve, reject) => {
  reject("ç¬¬ä¸€ä¸ªerror");
}).catch(function(err) {
  console.log(err);
});
Promise.resolve().then(() => {
  throw "ç¬¬ä¸‰æ–¹error";
});
Promise.reject("ç¬¬äºŒä¸ªé”™è¯¯");
```

- `www.fundebug.com`ä»˜è´¹é”™è¯¯ç›‘æ§
- `badjs`
- ç›‘æ§æŠ¥é”™è½¬ä¸ºè§†é¢‘
  - è®°å½•ç”¨æˆ· xpath ç”¨æˆ·æ“ä½œæ ˆ
  - æœåŠ¡ç«¯ xpath -> gif
  - socket å›¾ç‰‡ html2canvas æœåŠ¡ç«¯ å¸§-> server
  - sessionstack è®°å½•ç”¨æˆ·æ“ä½œé”™çš„è®°å½•æ‰§è¡Œ
  - å®¹é”™çš„æ—¶å€™ï¼Œä¸èƒ½å ç”¨ ajaxï¼Œä¼šå ç”¨å¹¶å‘ ç”¨`navigator.sendBeacon("xx.php")`ä¸“é—¨ç”¨ä½œç»Ÿè®¡
- zanePerfor github é¡¹ç›®
