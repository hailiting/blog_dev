(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{424:function(t,s,a){t.exports=a.p+"assets/img/travis_github_developerSettings.af07ab36.png"},425:function(t,s,a){t.exports=a.p+"assets/img/travis_github_generatenewtoken.e560f855.png"},750:function(t,s,a){"use strict";a.r(s);var e=a(44),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"travis-持续部署与发布"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#travis-持续部署与发布"}},[t._v("#")]),t._v(" travis 持续部署与发布")]),t._v(" "),e("p",[e("code",[t._v("travis")]),t._v("[https://travis-ci.com/]")]),t._v(" "),e("h2",{attrs:{id:"根目录新建-travis-yml"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#根目录新建-travis-yml"}},[t._v("#")]),t._v(" 根目录新建"),e("code",[t._v(".travis.yml")])]),t._v(" "),e("div",{staticClass:"language-yml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("language")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" node_js "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 构建工具")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("node_js")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"stable"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# node稳定版本")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cache")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("directories")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" node_modules "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 依赖所存在的文件夹")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("env")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CI=true "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 环境变量")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("script")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" npm run build"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("storybook "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 运行的命令 默认 npm test")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("deploy")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# https://docs.travis-ci.com/user/deployment/pages/")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("provider")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" pages\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("skip_cleanup")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("github_token")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $github_token "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置github来完成")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("local_dir")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" storybook"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("static "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 默认是build")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("branch")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" master "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 哪一个分支变动触发deploy")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 如果根目录有yarn.lock.js文件，travis优先使用yarn安装")]),t._v("\n")])])]),e("h2",{attrs:{id:"设置-github"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#设置-github"}},[t._v("#")]),t._v(" 设置 github")]),t._v(" "),e("p",[e("img",{attrs:{src:a(424),alt:"travis_github_developerSettings"}})]),t._v(" "),e("h4",{attrs:{id:""}},[e("a",{staticClass:"header-anchor",attrs:{href:"#"}},[t._v("#")])]),t._v(" "),e("p",[t._v("官方文档[https://developer.github.com/apps/building-github-apps/creating-a-github-app/]\n"),e("img",{attrs:{src:a(425),alt:"travis_github_generatenewtoken"}}),t._v("\n个人中心 -> Developer settings-> Personal access tokens【创建成功的 token 之后就看不到了】\n"),e("img",{attrs:{src:"travis_github_personalaccesstoken.jpg",alt:"travis_github_personalaccesstoken"}}),t._v(" "),e("img",{attrs:{src:"travis_setting.jpg",alt:"travis_setting"}}),t._v("\n注意，"),e("code",[t._v(".travis.yml")]),t._v("的 deploy 里的"),e("code",[t._v("$github_token")]),t._v("就是 name")])])}),[],!1,null,null,null);s.default=n.exports}}]);