(window.webpackJsonp=window.webpackJsonp||[]).push([[319],{743:function(t,a,s){"use strict";s.r(a);var n=s(44),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"_2020-100-道面试题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2020-100-道面试题"}},[t._v("#")]),t._v(" 2020-100 道面试题")]),t._v(" "),s("h2",{attrs:{id:"_6-react-项目中有哪些细节可以优化-实际开发中都做过哪些性能优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-react-项目中有哪些细节可以优化-实际开发中都做过哪些性能优化"}},[t._v("#")]),t._v(" 6: React 项目中有哪些细节可以优化，实际开发中都做过哪些性能优化")]),t._v(" "),s("p",[t._v("对于正常的项目优化，一般涉及到几个方面：开发过程中、上线之后的首屏、运行过程的状态")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("上线后的首屏及运行状态")]),t._v(" "),s("ul",[s("li",[t._v("首屏的优化涉及到几个指标：FP、FCP、FMP;要有一个良好的体验是尽可能的把 FCP 提前，需要做一些工程化的处理，去优化资源的加载")]),t._v(" "),s("li",[t._v("方式及分包策略，资源的减少是最有效的加快首屏打开方式")]),t._v(" "),s("li",[t._v("对于 CSR 应用，FCP 的过程一般是首先加载 js 与 css 资源，js 在本地执行完成，然后加载数据回来，做内容初始化渲染，这中间就有几次网络反复请求的过程，所以 CSR 可以考虑使用骨架屏及预渲染（部分结构预渲染），suspence 与 lazy 做懒加载动态组件的方式")]),t._v(" "),s("li",[t._v("当然还有另一种方式就是 SSR 的方式，SSR 对于首屏的优化有一定的优势，但这种瓶颈一般在 Node 服务端的处理，建议使用 stream 流的方式来处理，对于体验与 node 端的内存管理等，都有优势。")]),t._v(" "),s("li",[t._v("不管对于 CSR 还是 SSR，都建议配合使用 ServiceWorker，来控制资源的调配及骨架屏秒开的体验")]),t._v(" "),s("li",[t._v("react 项目上线后，首先需要保障可用性，所以可以通过 React.Profiler 分析组件渲染次数及耗时的一些任务，但 Profile 记录的是 commit 阶段的数据，所以对于 react 的调和阶段需要结合 performance API 一起分析。")]),t._v(" "),s("li",[t._v("由于 React 是父级 props 改变之后，所有与 props 不相关的子组件在没有添加条件控件的情况下，也会触发 render 的渲染，这是没必要的，可以结合 React 的 PureComponent 以及 React.memo 等做浅处理，这中间有涉及到不可变数据的处理，当然也可以结合使用 ShouldComponentUpdate 做深比较处理。")]),t._v(" "),s("li",[t._v("所有的运行状态优化，都是减少不必要的 render，React.useMemo 与 React.useCallback 也是可以做很多优化地方")]),t._v(" "),s("li",[t._v("在很多应用中，都会涉及到使用 redux 以及使用 context，这两个都可能造成许多不必要的 render，所以在使用的时候，也需要谨慎处理一些数据")]),t._v(" "),s("li",[t._v("最后就是保证整个应用的可用性，为组件创建错误边界，可以使用 componentDidCatch 来处理")])])]),t._v(" "),s("li",[s("p",[t._v("实际项目中开发过程中还有很多其他优化点：")]),t._v(" "),s("ul",[s("li",[s("ol",[s("li",[t._v("保证数据的不可变性")])])]),t._v(" "),s("li",[s("ol",{attrs:{start:"2"}},[s("li",[t._v("使用唯一的键值迭代")])])]),t._v(" "),s("li",[s("ol",{attrs:{start:"3"}},[s("li",[t._v("使用 web worker 做密集型的任务处理")])])]),t._v(" "),s("li",[s("ol",{attrs:{start:"4"}},[s("li",[t._v("不在 render 中处理数据")])])]),t._v(" "),s("li",[s("ol",{attrs:{start:"5"}},[s("li",[t._v("不必要的标签，使用 React.Fragments")])])])])])]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[t._v("SSR"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("【服务端渲染】 CSR【客户方渲染】\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("FP(first paint)")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 首次绘制\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("FCP(first contentful paint)")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 首次内容绘制\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("LCP(Largest contentful paint)")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 最大内容渲染\nDCL(DomContentloaded)\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("FMP(First Meaningful Paint)")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 首次有效绘制\nL(onload)\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("TTL(Time to Interactive)")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 可交互时间\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("TBT(Total Blocking Time)")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 页面阻塞总时长\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("FID(First Input Delay)")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 首次输入延迟\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("CLS(Cumulative Layout Shift)")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 累积布局偏移\nSI(Speed Index)\n")])])]),s("h2",{attrs:{id:"_7-react-最新版本解决了什么问题-加了哪些东西-去了哪些东西"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-react-最新版本解决了什么问题-加了哪些东西-去了哪些东西"}},[t._v("#")]),t._v(" 7. react 最新版本解决了什么问题，加了哪些东西，去了哪些东西")]),t._v(" "),s("ul",[s("li",[s("ol",[s("li",[t._v("React 16.x 去掉了"),s("code",[t._v("componentWillMount")]),t._v("、"),s("code",[t._v("componentWillReceiveProps")]),t._v("、"),s("code",[t._v("componentsWillUpdata")]),t._v("三个生命周期，为弥补失去上面三个生命周期的不足，又加了两个，"),s("code",[t._v("static getDerivedStateFromProps")]),t._v("，"),s("code",[t._v("getSnapshotBeforeUpdate")]),t._v(",为啥要改，因为新的 React 用 Fiber 优化了算法，当有紧急的事情时，会打断渲染，处理完会从头渲染组件，不能保证只在挂载/拿到 props/状态变化的时候刷新一次，所以被标记为 Unsafe。")])])]),t._v(" "),s("li",[s("ol",{attrs:{start:"2"}},[s("li",[t._v("React 16.x 的三大新特性 Time Slicing, Suspense, hooks")])]),t._v(" "),s("ul",[s("li",[t._v("i. Time Slicing(解决 CPU 速度问题)，使得在执行任务的期间可以随时暂停，跑去干别的事情，这个特性使得 react 能在性能极其差的机器跑时，仍然能保持良好的性能")]),t._v(" "),s("li",[t._v("ii. Suspense(解决网络 IO 问题)和 lazy 配合，实现异步加载组件。能暂停当前组件的渲染，当完成某件事以后在继续渲染，解决从 react 出生到现在都存在的【异步副作用】的问题，并且解决得非常优雅，使用的是【异步但是同步的写法】，个人认为，这是最好的解决异步问题的方式")]),t._v(" "),s("li",[t._v("iii. 此外，还提供了一个内置函数 componentDidCatch，当有错误发生时，我们可以友好地展示 fallback 组件；可以捕捉到它的子元素（包括嵌套子元素）抛出的异常，可以复用错误组件")])])]),t._v(" "),s("li",[s("ol",{attrs:{start:"3"}},[s("li",[t._v("React16.8")])]),t._v(" "),s("ul",[s("li",[t._v("加了 hooks，让 React 函数式组件更加灵活")]),t._v(" "),s("li",[t._v("hooks 之前，React 存在很多问题\n"),s("ul",[s("li",[t._v("a. 在组件间复用状态逻辑很难")]),t._v(" "),s("li",[t._v("b. 复杂组件变得难以理解，高阶组件和函数组件嵌套过深")]),t._v(" "),s("li",[t._v("c. class 组件的 this 指向问题")]),t._v(" "),s("li",[t._v("d. 难以记忆的生命周期")])])]),t._v(" "),s("li",[t._v("hooks 很好的解决了上述问题，hooks 提供很多方法\n"),s("ul",[s("li",[t._v("a. useState 返回有状态值，以及更新这个状态值的函数")]),t._v(" "),s("li",[t._v("b. useEffect 接受包含命令的方式，可能有副作用代码的函数")]),t._v(" "),s("li",[t._v("c. useContext 接受上下文对象（从 React.createContext 返回值）并返回当前上下文值")]),t._v(" "),s("li",[t._v("d. useReducer useState 的替代方案，接受类型为(state, action)=> newState 的 reducer，并返回与 dispatch 方法配对的当前状态。")]),t._v(" "),s("li",[t._v("e. useCallback 返回一个回忆的 memoized 版本，该版本仅在其中一个输入发生更改时才会更改。纯函数的输入输出确定性。")]),t._v(" "),s("li",[t._v("f. useMemo 纯的记忆函数")]),t._v(" "),s("li",[t._v("g. useRef 返回一个可变的 ref 对象，其.current 属性被初始化为传递的参数，返回 ref 对象在组件的整个生命周期内保持不变")]),t._v(" "),s("li",[t._v("h. useImperativeMethods 自定义使用 ref 时公开给父组件的实例值")]),t._v(" "),s("li",[t._v("i. useMutationEffect 更新兄弟组件之前，它在 react 执行其 DOM 改变的同一阶段同步触发")]),t._v(" "),s("li",[t._v("j. useLayoutEffect DOM 改变后同步触发。使用它来从 DOM 读取布局并同步重新渲染")])])])])]),t._v(" "),s("li",[s("ol",{attrs:{start:"4"}},[s("li",[t._v("React16.9")])]),t._v(" "),s("ul",[s("li",[t._v("i. 重命名 Unsafe 生命周期方法，新的 UNSAFE_前缀将有助于在代码 review 和 debug 期间，使这些有问题的字样更突出")]),t._v(" "),s("li",[t._v("ii. 废弃 javascript: 形式的 URL,以 javascript 开头的 URL 非常容易遭受攻击，造成安全漏洞。")]),t._v(" "),s("li",[t._v("iii. 废弃"),s("code",[t._v("Factory")]),t._v("组件，工厂组件会导致 React 变大且变慢")]),t._v(" "),s("li",[t._v("iv. act()也支持异步函数，并且可以在调用它时使用 await")]),t._v(" "),s("li",[t._v("v. 使用"),s("code",[t._v("<React.Profiler>")]),t._v("进行性能评估，在较大的应用中追踪性能回归可能会很方便")])])]),t._v(" "),s("li",[s("ol",{attrs:{start:"5"}},[s("li",[t._v("React16.13.0")])]),t._v(" "),s("ul",[s("li",[t._v("i. 支持在渲染期间调用 setState,但仅适用于同一组件")]),t._v(" "),s("li",[t._v("ii. 可检测冲突样式规则并记录警告")]),t._v(" "),s("li",[t._v("iii. 废弃 unstatble_createPortal，使用 createPortal")]),t._v(" "),s("li",[t._v("iv. 将组件堆栈添加到其开发警告中，使开发人员能够隔离 bug 并调试其程序，这可以清楚地说明问题所在，更快的定位和修复错误")])])])]),t._v(" "),s("h2",{attrs:{id:"_17-react-事件绑定原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_17-react-事件绑定原理"}},[t._v("#")]),t._v(" 17. React 事件绑定原理")]),t._v(" "),s("p",[t._v("React 并不是将 click 事件绑定在该 div 的真实 DOM 上，而是在 document 处监听所有支持的事件，当事件发生并冒泡至 document 处时，react 将事件内容封装并交由真正的处理函数运行。这样的方式不仅减少内存消耗，还能在组件挂载销毁时统一订阅和移除事件。\n另外冒泡到 document 上的事件也不是原生浏览器事件，而是 React 自己实现合成事件(SyntheticEvent).\n因此我们如果不想要事件冒泡的话，调用 event.stopPropagation 是无效的，而应该调用 event.preventDefault。")]),t._v(" "),s("ul",[s("li",[s("ol",[s("li",[t._v("事件注册")])]),t._v(" "),s("ul",[s("li",[t._v("组件装载/更新")]),t._v(" "),s("li",[t._v("通过 lastProps、nextProps 判断是否新增、删除事件分别调用事件注册、卸载方法")]),t._v(" "),s("li",[t._v("通过 EventPluginHub 的 enqueuePutListener 进行事件存储")]),t._v(" "),s("li",[t._v("获取 document 对象")]),t._v(" "),s("li",[t._v("根据事件名称（如 onClick、onCaptureClick）判断是进行冒泡还是捕获")]),t._v(" "),s("li",[t._v("判断是否存在 addEventListener 方法，否则使用 attachEvent(兼容 IE)")]),t._v(" "),s("li",[t._v("给 document 注册原生事件回调为 dispatchEvent（统一的事件分发机制）")])])]),t._v(" "),s("li",[s("ol",{attrs:{start:"2"}},[s("li",[t._v("事件存储")])]),t._v(" "),s("ul",[s("li",[t._v("EventPluginHub 负责管理 React 合成事件 callback，它将 callback 存储在 listenerBank 中，另外还存储了负责合成事件的 Plugin")]),t._v(" "),s("li",[t._v("EventPluginHub 的 putListener 方法是向存储容器中增加一个 listener")]),t._v(" "),s("li",[t._v("获取绑定事件的元素的唯一标识 key")]),t._v(" "),s("li",[t._v("将 callback 根据事件类型，元素的唯一标识 key 存储在 listenerBank 中")]),t._v(" "),s("li",[t._v("listenerBank 的结构是："),s("code",[t._v("listenerBank[registrationName][key]")])])])]),t._v(" "),s("li",[s("ol",{attrs:{start:"3"}},[s("li",[t._v("事件触发执行")])]),t._v(" "),s("ul",[s("li",[t._v("触发 document 注册原生事件的回调 dispatchEvent")]),t._v(" "),s("li",[t._v("获取到触发这个事件最深一级的元素\n"),s("ul",[s("li",[t._v("这里的事件执行利用了 React 的批处理机制")])])])])])]),t._v(" "),s("div",{staticClass:"language-jsx extra-class"},[s("pre",{pre:!0,attrs:{class:"language-jsx"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("onClick")]),s("span",{pre:!0,attrs:{class:"token script language-javascript"}},[s("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("parentClick"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token script language-javascript"}},[s("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("parent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ref"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n  ")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("onClick")]),s("span",{pre:!0,attrs:{class:"token script language-javascript"}},[s("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("childClick"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token script language-javascript"}},[s("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("child "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ref"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n    test\n  ")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * 首先会获取到this.child\n * 遍历这个元素的所有父元素，依次对每一级元素进行处理\n * 构造合成事件\n * 将每一级的合成事件存储在eventQueue事件队列中\n * 遍历eventQueue\n * 通过isPropagationStopped判断当前事件是否执行了阻止冒泡方法\n * 如果阻止了冒泡，停止遍历，否则通过executeDispatch执行合成事件\n * 释放处理完成的事件\n */")]),t._v("\n")])])]),s("ul",[s("li",[s("ol",{attrs:{start:"4"}},[s("li",[t._v("合成事件")])]),t._v(" "),s("ul",[s("li",[t._v("调用 EventPluginHub 的 extractEvents 方法")]),t._v(" "),s("li",[t._v("循环所有类型的 EventPlugin(用来处理不同事件的工具方法)")]),t._v(" "),s("li",[t._v("在每个 EventPlugin 中根据不同的事件类型，返回不同的事件池")]),t._v(" "),s("li",[t._v("在事件池中取出合成事件，如果事件池为空，则创建一个新的")]),t._v(" "),s("li",[t._v("根据元素 nodeid(唯一标识 key)和事件类型从 listenerBink 中取出回调函数")]),t._v(" "),s("li",[t._v("返回带有合成事件参数的回调函数")])])])]),t._v(" "),s("h2",{attrs:{id:"_25-react-组件通信方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_25-react-组件通信方式"}},[t._v("#")]),t._v(" 25. React 组件通信方式")]),t._v(" "),s("p",[t._v("react 组件间通信通常有以下几种情况")]),t._v(" "),s("ul",[s("li",[t._v("i. 父组件向子组件通信")]),t._v(" "),s("li",[t._v("ii. 子组件向父组件通信")]),t._v(" "),s("li",[t._v("iii. 跨级组件通信")]),t._v(" "),s("li",[t._v("iv. 非嵌套关系的组件通信\n"),s("ul",[s("li",[t._v("a. 可以使用自定义事件通信（发布订阅模式）")]),t._v(" "),s("li",[t._v("b. 可以通过 redux 等进行全局状态管理")]),t._v(" "),s("li",[t._v("c. 如果是兄弟组件通信，可以找到两个兄弟的共同父节点，结合父子间通信方式进行通信")])])])]),t._v(" "),s("div",{staticClass:"language-jsx extra-class"},[s("pre",{pre:!0,attrs:{class:"language-jsx"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// i. 父组件向子组件通信")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("Child")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("Parent")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Child")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("baba"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ii. 子组件向父组件通信: props+回调方式")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("Child")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("cb")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("msg")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("onClick")]),s("span",{pre:!0,attrs:{class:"token script language-javascript"}},[s("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cb")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"baba"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("click me")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("Paret")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("msg")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Child callback "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bind")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// iii. 跨级组件通信 即: 父组件向组件通信，向更深层子组件通信")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3.1 使用props利用中间组件传递，果然过深会增加复杂度，并且这些props并不是中间组件自己想要的")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3.2 使用context,context相当于一个大容器，可以把要通信的内容放到容器里，contex📱目的就是为了共享对于一个组件树而言是全局的数据")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" BatteryContext "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createConext")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 子组件的子组件")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GrandChild")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Component")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BatteryContext.Consumer")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n        ")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("color")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("style")]),s("span",{pre:!0,attrs:{class:"token script language-javascript"}},[s("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("color"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" color"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("我的颜色： ")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("color"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n      ")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BatterConntext.Consumer")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n    )\n  }\n}\n// 子组件\nclass Child = ()=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GrandChild")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n// 父组件\nclass Parant extends Component")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  state "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    color"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"red"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("color"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ButteryContext.Provider")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token script language-javascript"}},[s("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("color"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n        ")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Child")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n      ")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ButteryContext.Provider")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n")])])])]),s("h2",{attrs:{id:"_26-redux-saga和mobx的比较"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_26-redux-saga和mobx的比较"}},[t._v("#")]),t._v(" 26. "),s("code",[t._v("redux-saga")]),t._v("和"),s("code",[t._v("mobx")]),t._v("的比较")]),t._v(" "),s("p",[t._v("saga 是 redux 处理异步的一种方式。saga 需要一个全局监听器（watcher saga）,用于监听组件发出 action，将监听的 action 转发给对应的接收器（workersaga），再由接收器执行具体任务，任务完了在发出另一个 action 交由 reducer 修改 state.\nmobx 与 redux 的功能相似，mobx 实现思想和 Vue 几乎一样，所以其优点跟 Vue 也差不多：通过监听数据（对象，数组）的属性变化，可以通过直接在数据上更改就能触发 UI 渲染，从而做到"),s("code",[t._v("MVVM")]),t._v("、响应式、上手成本低、开发效率高。")]),t._v(" "),s("ul",[s("li",[t._v("redux 将数据保存在单一的 store 中，mobx 将数据保存在分散的多个 store 中")]),t._v(" "),s("li",[t._v("redux 使用"),s("code",[t._v("plain object")]),t._v("保存数据，需要手动处理变化后的操作，mobx 使用 observeble 保存数据，数据变化后自动处理响应操作。")]),t._v(" "),s("li",[t._v("redux 使用不可变状态，这意味着状态是只读的，不能直接去修改他，而是应该返回一个新的状态，同时使用纯函数；mobx 中状态是可变的，可直接对其进行修改。")]),t._v(" "),s("li",[t._v("mobx 相对来说比较简单，在其中有很多抽象，mobx 更多的使用面向对象的编程思维；redux 会比较复杂，因为其中的函数式编程思想掌握起来不太容易，同时需要借助一系列的中间件来处理异常和副作用")]),t._v(" "),s("li",[t._v("mobx 中有更多的抽象和封装，调试会比较困难，同时结果难以预测，而 redux 提供能够进行时间回溯的开发工具，同时其纯函数以及更少的抽象，让调试变的更加容易。")])]),t._v(" "),s("ul",[s("li",[s("ol",[s("li",[t._v("状态管理")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("redux-sage")]),t._v("是"),s("code",[t._v("redux")]),t._v("的一个异步处理中间件")]),t._v(" "),s("li",[s("code",[t._v("mobx")]),t._v("是数据管理库，和 redux 一样")])])]),t._v(" "),s("li",[s("ol",{attrs:{start:"2"}},[s("li",[t._v("设计思想")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("redux-sage")]),t._v("属于 flux 体系，函数式编程思想")]),t._v(" "),s("li",[s("code",[t._v("mobx")]),t._v("不属于 flux 体系，面向对象编程和响应式编程")])])]),t._v(" "),s("li",[s("ol",{attrs:{start:"3"}},[s("li",[t._v("主要特点")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("redux-sage")]),t._v("因为是中间件，更关注异步处理的，通过 Genetator 函数来将异步变为同步，使代码可读性高，结构清晰。action 也不是"),s("code",[t._v("action creator")]),t._v("而是"),s("code",[t._v("pure action")])]),t._v(" "),s("li",[t._v("在"),s("code",[t._v("Generator")]),t._v("函数中通过"),s("code",[t._v("call")]),t._v("或"),s("code",[t._v("put")]),t._v("方法直接声明式调用，并自带一些方法，如"),s("code",[t._v("takeEvery")]),t._v("、"),s("code",[t._v("takeLast")]),t._v("、"),s("code",[t._v("race")]),t._v("等，控制多异步操作，让多个异步更简单")]),t._v(" "),s("li",[s("code",[t._v("mobx")]),t._v("是更简单方便灵活的处理数据，store 是包含了 state 和 action。state 包装成一个可被视察的对象，action 可以直接修改 state，之后通过"),s("code",[t._v("Computed values")]),t._v("将依赖 state 的计算属性更新，之后触发 Reactions 响应依赖 state 的变更，输出相应的副作用，但不生成新的 state.")])])]),t._v(" "),s("li",[s("ol",{attrs:{start:"4"}},[s("li",[t._v("数据可变性")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("redux-sage")]),t._v("强调 state 不可变，不能直接操作 state，通过 action 和 reducer 在原来的 state 基础上返回一个新的 state 达到改变 state 的目的")]),t._v(" "),s("li",[s("code",[t._v("mobx")]),t._v("直接在方法中更改 state, 同时所有使用 state 都发生变化，不生成新的 state")])])]),t._v(" "),s("li",[s("ol",{attrs:{start:"5"}},[s("li",[t._v("写法难易度")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("redux-saga")]),t._v("比"),s("code",[t._v("redux")]),t._v("在"),s("code",[t._v("actionn")]),t._v("和"),s("code",[t._v("reducer")]),t._v("上要简单一些，需要用 dispatch 触发 state 的改变，需要 mapStateToProps 订阅 state")]),t._v(" "),s("li",[t._v("mobx 在非严格模式下不用 action 和 reducer，在严格模式下需要 action 中修改 state, 并自动触发相关的依赖更新")])])]),t._v(" "),s("li",[s("ol",{attrs:{start:"6"}},[s("li",[t._v("使用场景")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("redux-sage")]),t._v("很好的解决了 redux 关于异步处理时的复杂度和代码冗余的问题，数据流向好追踪。但 redux 的学习成本比较高，代码比较冗余，不是特别需要状态管理，可以用别的替换")]),t._v(" "),s("li",[s("code",[t._v("mobx")]),t._v("学习成本低，能快速上手，代码比较简洁，但可能因为代码编写的原因和数据更新时相对黑盒，导致数据流向不利于追踪。")])])])]),t._v(" "),s("h2",{attrs:{id:"_27-说一下-react-fiber"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_27-说一下-react-fiber"}},[t._v("#")]),t._v(" 27. 说一下 react-fiber")]),t._v(" "),s("ul",[s("li",[t._v("背景\n"),s("ul",[s("li",[t._v("react 在进行组件渲染时，从 setState 开始到渲染完成整个过程是同步的（一气呵成）。如果需要渲染的组件比较庞大，js 执行会占据主线程事件较长，会导致页面响应度变差，使得 react 在动画、手势等应用中效果比较差。")]),t._v(" "),s("li",[t._v("页面卡顿：Stackreconciler 的工作流程很像函数调用过程，父组件里调用子组件，可以类比为函数递归，对于特别庞大的 vDOM 树来说，reconciliatio 过程会很长(x00ms)，超过 16ms，在这期间，主线程被 js 占用，因此任何交互、布局、渲染都会停止，给用户的感觉就是页面被卡住。")])])]),t._v(" "),s("li",[t._v("实现原理\n"),s("ul",[s("li",[t._v("旧版 React 通过递归的方式进行渲染，使用的是 JS 引擎自身的函数调用栈，它会一直执行到栈空为止。而 Fiber 实现了自己的组件调用栈，它以链表的修饰遍历组件树，可以灵活的暂停、继续和丢弃执行的任务。实现方式是使用了浏览器的 requesIdleCallback 这个 api")]),t._v(" "),s("li",[t._v("Fiber 其实指的是一种数据结构，它可以用一个纯的 js 对象来表示：")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fiber "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  stateNode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 节点实例")]),t._v("\n  child"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 子节点")]),t._v("\n  sibling"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 兄弟节点")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 父节点")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),s("li",[t._v("react 内部运转分为三层：\n"),s("ul",[s("li",[t._v("Virtual DOM 层，描述页面长什么样子")]),t._v(" "),s("li",[t._v("Reconciler 层，负责调用组件生命周期方法，进行 Diff 运算等")]),t._v(" "),s("li",[t._v("Renderer 层，根据不同平台，渲染出相应的页面，比较常见的是 ReactDOM 和 ReactNative")])])]),t._v(" "),s("li",[t._v("为实现不卡顿，就需要有一个调度器(Scheduler)来进行任务分配。优先级高的任务（如：键盘输入）可以打断优先级低的任务（如：Diff）的执行，从而更快的生效。任务的优先级有六种\n"),s("ul",[s("li",[t._v("synchronous 与之前的 StackReconciler 操作一样，同步执行")]),t._v(" "),s("li",[t._v("task：在 next tick 之前执行")]),t._v(" "),s("li",[t._v("animation：下一帧之前执行")]),t._v(" "),s("li",[t._v("high：在不久的将来执行")]),t._v(" "),s("li",[t._v("low：稍微延迟执行也没关系")]),t._v(" "),s("li",[t._v("offscreen 下一次 render 或 scroll 时执行")])])]),t._v(" "),s("li",[t._v("Fiber Reconciler(react)执行阶段\n"),s("ul",[s("li",[t._v("阶段一：生成 Fiber 树，得出需要更新的节点信息，这一步是一个渐进的过程，可以被打断")]),t._v(" "),s("li",[t._v("阶段二：将需要更新的节点一次过批量更新，这个过程不能被打断")])])]),t._v(" "),s("li",[t._v("Fiber 树：Fiber Reconciler 在阶段一进行 Diff 计算的时候，会基于 VirtualDOM 树生成一课 Fiber 树，它的本质是链表")]),t._v(" "),s("li",[t._v("从 Stack Reconciler 到 FiberReconciler，源码层面其实就是干了一件递归改循环的事情。")])]),t._v(" "),s("h2",{attrs:{id:"_42-说一下-react-hooks-在平时开发中需要注意的问题及原因"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_42-说一下-react-hooks-在平时开发中需要注意的问题及原因"}},[t._v("#")]),t._v(" 42. 说一下 React Hooks 在平时开发中需要注意的问题及原因")]),t._v(" "),s("ul",[s("li",[s("ol",[s("li",[t._v("不要在循环，条件或嵌套函数中调用 Hook，必须始终在 React 函数的顶层使用 hook")])]),t._v(" "),s("ul",[s("li",[t._v("这是因为 React 需要利用调用顺序来正确更新相应的状态，以及调用相应的钩子函数，一旦在循环或条件语句中调用 Hook,就容易导致调用顺序不一致性，从而产生难以预料的后果。")])])]),t._v(" "),s("li",[s("ol",{attrs:{start:"2"}},[s("li",[t._v("使用"),s("code",[t._v("useState")]),t._v("时候，使用 push，pop，splice 等直接更改数组对象的坑")])]),t._v(" "),s("ul",[s("li",[t._v("使用 push 直接更改数组无法获取到最新的值，应该采用析构方式，但在 class 里不会有这个问题")])]),t._v(" "),s("div",{staticClass:"language-jsx extra-class"},[s("pre",{pre:!0,attrs:{class:"language-jsx"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Indicatorfilter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("num"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setNums"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("test")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这里的坑是直接采用push去更新num，setNums(num)是无法更新num的")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 必须使用 num = [...num, 1] setNums(num);")]),t._v("\n    num"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setNums")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("num"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("className")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("filter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n      ")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("onClick")]),s("span",{pre:!0,attrs:{class:"token script language-javascript"}},[s("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("test"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("click test")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n      ")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("num"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n    ")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),s("li",[s("code",[t._v("useState")]),t._v("设置状态的时候，只有第一次生效，后期需要更新状态，必须通过"),s("code",[t._v("useEffect")])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// error")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("TableDetail")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" columns "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" TableData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("tabColumn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setTabColumn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("columns"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// success")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("TableDetail")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" columns "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" TableData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("tabColumn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setTabColumn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("columns"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTabColumn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("columns"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("columns"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("ul",[s("li",[s("ol",{attrs:{start:"4"}},[s("li",[t._v("善用"),s("code",[t._v("useCallback")])])]),t._v(" "),s("ul",[s("li",[t._v("当"),s("code",[t._v("useCallback")]),t._v("父组件传递子组件事件句柄时，如果没有任何参数变动的组件即使用 useMeno，也会跟着渲染一次")])])]),t._v(" "),s("li",[s("ol",{attrs:{start:"5"}},[s("li",[t._v("不要滥用"),s("code",[t._v("useContext")]),t._v("，可以使用基于"),s("code",[t._v("useContext")]),t._v("封装的状态管理工具")])])])])])}),[],!1,null,null,null);a.default=e.exports}}]);