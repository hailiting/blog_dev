(window.webpackJsonp=window.webpackJsonp||[]).push([[150],{556:function(e,s,t){"use strict";t.r(s);var a=t(44),n=Object(a.a)({},(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"pm2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pm2"}},[e._v("#")]),e._v(" pm2")]),e._v(" "),t("p",[e._v("pm2 进程管理工具")]),e._v(" "),t("h2",{attrs:{id:"常用命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用命令"}},[e._v("#")]),e._v(" 常用命令")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("1 全局安装pm2\nnpm install -g pm2\n2 进入项目根目录\n  2.1 启动进程/应用 pm2 start bin/www 或 pm2 start app.js\n  2.2 重命名进程/应用 pm2 start app.js --name wb123\n  2.3 添加进程/应用 pm2 start bin/www --watch\n  2.4 结束进程/应用 pm2 stop www\n  2.5 结束所有进程/应用 pm2 stop all\n  2.6 删除进程/应用 pm2 delete www\n  2.7 删除所有进程/应用 pm2 delete all\n  2.8 列出所有进程/应用 pm2 list\n  2.9 查看某个进程/应用的具体情况 pm2 describe www\n  2.10 查看进程/应用的资源消耗情况 pm2 monit\n  2.11 查看pm2的日志 pm2 logs\n  2.12 若要查看某个进程/应用的日志 pm2 logs www\n  2.13 重启进程/应用 pm2 restart www\n  2.14 重新启动所有进程/应用 pm2 restart all\n")])])]),t("h2",{attrs:{id:"pm2-json"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pm2-json"}},[e._v("#")]),e._v(" pm2.json")]),e._v(" "),t("p",[e._v("npm 包\n--save【上线需要的依赖包】 dependencies\n--save-dev 【上线不需要的依赖包】 devDependenciess\n"),t("code",[e._v("npm install --production")]),e._v(" 只下载上线需要的依赖包 生产环境依赖")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('pm2 start pm2.json\npm2 stop all\n\n`{\n  "name": "Mobilemap node service",\n  "script": "app.js",\n  "log_date_format":"YYYY-MM-DD HH:mm Z",\n  "error_file": "/data/logs/mobilemap-node-seriver-stderr-error.log",\n  "out_file": "/data/logs/mobilemap-node-seriver-stdout-access.log",\n  "watch": true,\n  "instances": "max", // 让node代码占满cpu\n  "exec_mode": "cluster",  //以主线程的形式运行\n}`\n')])])]),t("h2",{attrs:{id:"shelljs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#shelljs"}},[e._v("#")]),e._v(" shelljs")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('npm i shelljs --save-dev\nnode deploy.js  // 运行\n// deploy.js  shell命令都可以执行\nvar shell = require("shelljs");\nshell.exec("npm install --production");\nshell.exec("pm2 start pm2.json");\n')])])])])}),[],!1,null,null,null);s.default=n.exports}}]);