(window.webpackJsonp=window.webpackJsonp||[]).push([[136],{539:function(e,n,r){"use strict";r.r(n);var t=r(44),a=Object(t.a)({},(function(){var e=this,n=e.$createElement,r=e._self._c||n;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"hapi"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#hapi"}},[e._v("#")]),e._v(" Hapi")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("npm install @hapi/hapi@18.4.1\n")])])]),r("h2",{attrs:{id:"实例"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#实例"}},[e._v("#")]),e._v(" 实例")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("const Hapi = require(\"@hapi/hapi\");\nconst routers = require(\"./routers\")\n\nconst server = Hapi.server({\n  port: 3999,\n  host: 'localhost'\n});\n\nasync function start() {\n  await server.start();\n  // 注册插件 引用静态资源需要的插件\n  await server.register(require(\"inert\"))\n  await server.register({\n    plugin: require(\"hapi-pino\"),\n    options: {\n      prettyPrint: true,\n      logEvents: [\"response\"]\n    }\n  });\n  for (let router of routers) {\n    server.route({\n      method: router.method,\n      path: router.path,\n      handler: router.handler\n    });\n  }\n  console.log('Server running on %s', server.info.uri);\n}\nstart();\n\n\nprocess.on('unhandledRejection', (err) => {\n  console.log(err);\n  process.exit(1);\n});\n// router\nvar path = require(\"path\")\nvar home = {\n  method: 'GET',\n  path: '/',\n  handler: (request, h) => {\n    return 'Hello World!';\n  }\n}\nvar username = {\n  method: 'GET',\n  path: '/username/{name}',\n  handler: (request, h) => {\n    return `Hello ${encodeURIComponent(request.params.name)}!`;\n  }\n}\nvar indexHtml = {\n  method: 'GET',\n  path: '/index',\n  handler: (request, h) => {\n    /**\n    * 需要权限\n    * 1，是否是 当前跟目录 chmod 777 public\n    * 2，路径是否引用错误  全路径\n    */\n    request.logger.info(\"In handler %s\", request.path);\n    return h.file(path.join(__dirname, \"../public/index.html\"));\n  }\n}\nmodule.exports = [home, username, indexHtml]\n")])])])])}),[],!1,null,null,null);n.default=a.exports}}]);