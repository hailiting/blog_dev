(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{379:function(t,a,s){t.exports=s.p+"assets/img/flutter-attach.ba876169.png"},380:function(t,a,s){t.exports=s.p+"assets/img/ios_bitcode_set.78bec12a.png"},381:function(t,a,s){t.exports=s.p+"assets/img/ios-build-phase-set01.7efd88dc.png"},487:function(t,a,s){"use strict";s.r(a);var n=s(44),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"混合开发-android"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#混合开发-android"}},[t._v("#")]),t._v(" 混合开发 Android")]),t._v(" "),n("ul",[n("li",[t._v("页面级的混合开发")]),t._v(" "),n("li",[t._v("模块的混合开发")])]),t._v(" "),n("h2",{attrs:{id:"项目运行"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#项目运行"}},[t._v("#")]),t._v(" 项目运行")]),t._v(" "),n("ul",[n("li",[t._v("安装和配置 Flutter 开发环境")]),t._v(" "),n("li",[t._v("首先在"),n("code",[t._v("flutter_hybrid > flutter_module")]),t._v("目录下运行"),n("code",[t._v("flutter packages get")]),t._v(";")]),t._v(" "),n("li",[t._v("运行在 iOS 上的方式\n"),n("ul",[n("li",[t._v("在"),n("code",[t._v("flutter_hybrid-> FlutterHybridiOS")]),t._v("目录下运行"),n("code",[t._v("pod install")]),t._v(";")]),t._v(" "),n("li",[t._v("用 Xcode 打开"),n("code",[t._v("FlutterHybridiOS.xcworkspace")]),t._v("然后运行项目；")])])]),t._v(" "),n("li",[t._v("运行 Android 上的方式\n"),n("ul",[n("li",[t._v("用"),n("code",[t._v("Android Studio")]),t._v("打开"),n("code",[t._v("flutter_hybrid->FlutterHybridAndroid")]),t._v("然后运行项目；")])])])]),t._v(" "),n("h2",{attrs:{id:"flutter-集成步骤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#flutter-集成步骤"}},[t._v("#")]),t._v(" Flutter 集成步骤")]),t._v(" "),n("ul",[n("li",[t._v("创建"),n("code",[t._v("Flutter module")])]),t._v(" "),n("li",[t._v("添加"),n("code",[t._v("Flutter module")])]),t._v(" "),n("li",[t._v("在"),n("code",[t._v("Java/Object-c")]),t._v("中调用"),n("code",[t._v("Flutter module")])]),t._v(" "),n("li",[t._v("编写 Dart 代码")]),t._v(" "),n("li",[t._v("运行项目")]),t._v(" "),n("li",[t._v("热重启/热加载")]),t._v(" "),n("li",[t._v("调试 Dart 代码")]),t._v(" "),n("li",[t._v("发布应用")])]),t._v(" "),n("h2",{attrs:{id:"创建flutter-module"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#创建flutter-module"}},[t._v("#")]),t._v(" 创建"),n("code",[t._v("Flutter module")])]),t._v(" "),n("p",[t._v("在做混合开发前，我们首先需要创建一个"),n("code",[t._v("Flutter module")]),n("br"),t._v("\n假如 Native 项目是"),n("code",[t._v("xxx/flutter_hybrid/native项目")])]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" xxx/flutter_hybrid/\nflutter create -t module flutter_module"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("模块名"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),n("p",[t._v("上面代码会切换到你的 Android/iOS 项目的上一级目录，并创建一个 flutter 模块。")]),t._v(" "),n("div",{staticClass:"language-ls extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("// flutter_module/\n.android // 隐藏文件   flutter_module的Android宿主工程\n.gitignore\n.idea\n.ios  // 隐藏文件      flutter_module的iOS宿主工程\n.metadata\n.packages\nbuild\nflutter_module_android.iml\nflutter_module.iml\nlib  // flutter_module的Dart部分代码\npubspec.lock\npubspec.yaml   // flutter_module的项目依赖配置文件\nREADME.md\ntest\n")])])]),n("blockquote",[n("p",[t._v("因为宿主工程的存在，"),n("code",[t._v("flutter_module")]),t._v("在不加额外配置的情况下是可以独立运行的")])]),t._v(" "),n("h2",{attrs:{id:"android-混合开发"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#android-混合开发"}},[t._v("#")]),t._v(" android 混合开发")]),t._v(" "),n("h3",{attrs:{id:"为-android-项目添加-flutter-依赖"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#为-android-项目添加-flutter-依赖"}},[t._v("#")]),t._v(" 为 android 项目添加 flutter 依赖")]),t._v(" "),n("ul",[n("li",[n("ol",[n("li",[t._v("在 flutter_module 同级目录下添加"),n("code",[t._v("FlutterHybridAndroid")]),t._v("项目依赖")])])]),t._v(" "),n("li",[n("ol",{attrs:{start:"2"}},[n("li",[t._v("设置 Android 项目下的"),n("code",[t._v("Gradle Scripts")]),t._v("里的"),n("code",[t._v("settings.gradle")]),t._v("和"),n("code",[t._v("build.gradle")])])])])]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// settings.gradle")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 让flutter做单独的模块")]),t._v("\ninclude "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("':app'")]),t._v("\nrootProject"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"FlutterHybridAndroid"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setBinding")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Binding")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("gradle"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("evaluate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("File")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        settingsDir"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("parentFile"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'flutter_module/.android/include_flutter.groovy'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ninclude "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("':flutter_module'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("project")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("':flutter_module'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("projectDir "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("File")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../flutter_module'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// build.gradle  添加依赖")]),t._v("\ndependencies "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n  implementation "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("project")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("':flutter'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在settings.gradle下 async")]),t._v("\n")])])]),n("h3",{attrs:{id:"在-java-中调用-flutter-module-模块"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#在-java-中调用-flutter-module-模块"}},[t._v("#")]),t._v(" 在 Java 中调用 Flutter module 模块")]),t._v(" "),n("p",[t._v("在 Java 中调用 Flutter 模块有两种方式")]),t._v(" "),n("ul",[n("li",[t._v("使用"),n("code",[t._v("Flutter.createView")]),t._v("API 的方式")]),t._v(" "),n("li",[t._v("使用"),n("code",[t._v("FlutterFragment")]),t._v("的方式")])]),t._v(" "),n("h3",{attrs:{id:"flutter-createview"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#flutter-createview"}},[t._v("#")]),t._v(" Flutter.createView")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// FlutterHybridAndroid/app/src/main/java/some/package/MainActivity.java")]),t._v("\nfab"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setOnClickListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("View"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("OnlickListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@override")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("onClick")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("View")]),t._v(" view"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("View")]),t._v(" flutterView "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Flutter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createView")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MainActivity")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLifecycle")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"route1"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FrameLayoutt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("LayoutParams")]),t._v(" layout "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FrameLayout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("LayoutParams")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("600")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("800")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    layout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("leftMargin "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    layout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("topMarginn "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addContentView")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fluterView"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" layout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("h3",{attrs:{id:"flutterfragment"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#flutterfragment"}},[t._v("#")]),t._v(" FlutterFragment")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// FlutterHybridAndroid/app/src/main/java/some/package/SomeAcivity.java")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("findViewById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("R")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("test"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setOnClickListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("View"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("OnClickListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("onClick")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("View")]),t._v(" view"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FragmentTransaction")]),t._v(" tx "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSupportFragmentManager")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("beginTransaction")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FlutterFragment")]),t._v(" fragment "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FlutterFragment")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("withNewEngine")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("initialRoute")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"{name:'devio',dataList:['aa','bb','cc']}\"")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        tx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("replace")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("R")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("someContainer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fragment"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        tx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("commit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// fragment创建及替换")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("div",{staticClass:"language-dart extra-class"},[n("pre",{pre:!0,attrs:{class:"language-dart"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 用window去读取参数")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("runApp")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("MyApp")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("initParams"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("defaultRouteName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h3",{attrs:{id:"热重启-重新加载"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#热重启-重新加载"}},[t._v("#")]),t._v(" 热重启/重新加载")]),t._v(" "),n("ul",[n("li",[t._v("打开一个模拟器，或连接一个设备到电脑上")]),t._v(" "),n("li",[t._v("关闭 APP，然后运行"),n("code",[t._v("flutter attach")])]),t._v(" "),n("li",[t._v("android studio restart app")]),t._v(" "),n("li",[t._v("app 调起 Flutter, R 热重启， r 热加载，h 获取帮助，d 断开连接")])]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# flutter attach -d 'emulator-5554'  // 在多个设备里找到某一个设备  -d 获取id")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" flutter_hybrid/flutter_module\nflutter attach\n")])])]),n("h3",{attrs:{id:"调试-dart-代码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#调试-dart-代码"}},[t._v("#")]),t._v(" 调试 Dart 代码")]),t._v(" "),n("ul",[n("li",[t._v("关闭 App")]),t._v(" "),n("li",[t._v("点击 AndroidStudio 的"),n("code",[t._v("Flutter Attach")]),t._v("按钮（需要首先安装 Flutter 与 Dart 插件）")]),t._v(" "),n("li",[t._v("启动 APP\n"),n("img",{attrs:{src:s(379),alt:"flutter-attach"}})])]),t._v(" "),n("h3",{attrs:{id:"发布应用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#发布应用"}},[t._v("#")]),t._v(" 发布应用")]),t._v(" "),n("ul",[n("li",[t._v("签名打包")]),t._v(" "),n("li",[t._v("发布到 store")])]),t._v(" "),n("h3",{attrs:{id:"_1-生成证书用于-app-签名"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-生成证书用于-app-签名"}},[t._v("#")]),t._v(" 1. 生成证书用于 APP 签名")]),t._v(" "),n("h3",{attrs:{id:"_2-设置-gradle-变量"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-设置-gradle-变量"}},[t._v("#")]),t._v(" 2. 设置 gradle 变量")]),t._v(" "),n("ul",[n("li",[t._v("将签名证书 copy 到"),n("code",[t._v("android/app")]),t._v("目录下")]),t._v(" "),n("li",[t._v("编辑"),n("code",[t._v("~/.gradle/gradle.properties")]),t._v("或"),n("code",[t._v("../android/gradle.properties")]),t._v("(一个是全局的，一个是项目的)")])]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# gradle.properties")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("MYAPP_RELEASE_KEY_ALIAS")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("android_keystore "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# your keystore alias")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("MYAPP_RELEASE_KEY_PASSWORD")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("123456")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("MYAPP_RELEASE_STORE_PASSWORD")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("123456")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# android_keystore.jks 放在./app/android_keystore.jks")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("MYAPP_RELEASE_STORE_FILE")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("android_keystore.jks "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# your keystore filename")]),t._v("\n")])])]),n("h3",{attrs:{id:"_3-在-gradle-配置文件中添加签名配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-在-gradle-配置文件中添加签名配置"}},[t._v("#")]),t._v(" 3. 在 gradle 配置文件中添加签名配置")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// android/app/build.gradle")]),t._v("\nandroid "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n  defaultConfig "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  signingConfigs "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      release "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          storeFile "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MYAPP_RELEASE_STORE_FILE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n          storePassword MYAPP_RELEASE_STORE_PASSWORD\n          keyAlias MYAPP_RELEASE_KEY_ALIAS\n          keyPassword MYAPP_RELEASE_KEY_PASSWORD\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  buildTypes "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      release "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          minifyEnabled "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n          proguardFiles "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDefaultProguardFile")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'proguard-android-optimize.txt'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'proguard-rules.pro'")]),t._v("\n          signingConfig signingConfigs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("release\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"_4-签名打包-apk"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-签名打包-apk"}},[t._v("#")]),t._v(" 4. 签名打包 APK")]),t._v(" "),n("p",[t._v("terminal 进入项目下的 android 目录，运行如下代码：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("./gradlew assembleRelease\n")])])]),n("p",[t._v("签名打包成功后，会在"),n("code",[t._v("android/app/build/outputs/apk")]),t._v("目录下看到签名成功后的"),n("code",[t._v("app-release.apk")]),t._v("文件。\nTips: 如果需要多 apk 进行混淆打包，编辑 android/app/build.gradle:")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("def enableProguardInReleaseBuilds = true\n")])])]),n("h2",{attrs:{id:"ios-混合开发"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ios-混合开发"}},[t._v("#")]),t._v(" ios 混合开发")]),t._v(" "),n("h3",{attrs:{id:"为-ios-项目添加-flutter-依赖"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#为-ios-项目添加-flutter-依赖"}},[t._v("#")]),t._v(" 为 iOS 项目添加 flutter 依赖")]),t._v(" "),n("h4",{attrs:{id:"在-podfile-文件中添加-flutter-依赖"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#在-podfile-文件中添加-flutter-依赖"}},[t._v("#")]),t._v(" 在 Podfile 文件中添加 flutter 依赖")]),t._v(" "),n("ul",[n("li",[t._v("如果 ios 项目中没有"),n("code",[t._v("Podfile")]),t._v("文件，则"),n("code",[t._v("pod init")]),t._v("添加")])]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Podfile")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Uncomment the next line to define a global platform for your project")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# platform :ios, '9.0'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("flutter_application_path")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"../flutter_module"')]),t._v("\nload File.join"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("flutter_application_path, "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('".ios"')]),t._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Flutter"')]),t._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"podhelper.rb"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ntarget "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'FlutterHybirdiOS (iOS)'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Comment the next line if you don't want to use dynamic frameworks")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# use_frameworks!")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Pods for FlutterHybirdiOS (iOS)")]),t._v("\n  install_all_flutter_pods"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("flutter_application_path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nend\n\ntarget "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'FlutterHybirdiOS (macOS)'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Comment the next line if you don't want to use dynamic frameworks")]),t._v("\n  use_frameworks"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Pods for FlutterHybirdiOS (macOS)")]),t._v("\n\nend\n")])])]),n("ul",[n("li",[t._v("添加好依赖 "),n("code",[t._v("pod install")])]),t._v(" "),n("li",[t._v("打开"),n("code",[t._v(".xcworkspace")]),t._v("后缀的 iOS 项目")]),t._v(" "),n("li",[t._v("当"),n("code",[t._v("flutter_module/pubspec.yaml")]),t._v("添加一个 Flutter 插件时，除了在 flutter 模块下运行"),n("code",[t._v("flutter packages get")]),t._v("，还需要在 iOS 项目下运行"),n("code",[t._v("pod install")])]),t._v(" "),n("li",[t._v("禁用 Xcode 的"),n("code",[t._v("Bitcode")]),t._v(" "),n("img",{attrs:{src:s(380),alt:"ios_bitcode_set"}})]),t._v(" "),n("li",[t._v("添加"),n("code",[t._v("build phase")]),t._v("以构建 Dart 代码\n"),n("img",{attrs:{src:s(381),alt:"ios-build-phase-set01"}}),t._v(" "),n("ul",[n("li",[t._v("shell 脚本")])]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$FLUTTER_ROOT")]),t._v('/packages/flutter_tools/bin/xcode_backend.sh"')]),t._v(" buiObject-cld\n"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$FLUTTER_ROOT")]),t._v('/packages/flutter_tools/bin/xcode_backend.sh"')]),t._v(" embed\n")])])])]),t._v(" "),n("li",[t._v("build 成功说明依赖添加成功")])]),t._v(" "),n("h2",{attrs:{id:"在-objec-c-中调用-flutter-模块的两种方法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#在-objec-c-中调用-flutter-模块的两种方法"}},[t._v("#")]),t._v(" 在 Objec-c 中调用 Flutter 模块的两种方法")]),t._v(" "),n("ul",[n("li",[t._v("直接使用"),n("code",[t._v("FlutterViewController")])]),t._v(" "),n("li",[t._v("使用 FlutterEngine 的方法")])])])}),[],!1,null,null,null);a.default=e.exports}}]);