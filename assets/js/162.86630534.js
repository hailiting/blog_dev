(window.webpackJsonp=window.webpackJsonp||[]).push([[162],{569:function(e,t,n){"use strict";n.r(t);var a=n(44),s=Object(a.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h1",{attrs:{id:"php-路由"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#php-路由"}},[e._v("#")]),e._v(" PHP 路由")]),e._v(" "),n("h2",{attrs:{id:"一-基于原生-php-的路由分配实现"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一-基于原生-php-的路由分配实现"}},[e._v("#")]),e._v(" 一：基于原生 PHP 的路由分配实现")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('<?php\n  // 权限控制\n  include_once "./auth.php";\n  // 应用入口文件\n  date_default_timezone_set("Asia/Shanghai");\n  header("Content-type: text/html;charset=utf-8");\n  // 项目根路径\n  define("BASEPATH", dirname(__FILE__));\n  // 调试模式\n  define("APP_DEBUG", True);\n\n  // 引入配置文件\n  include_once BASEPATH . "/config/config.php";\n\n  // 路由设置\n  $router = include_once BASEPATH . "/config/router.php";\n  if($_SERVER["HTTP_HOST"]!=="xxx.com"){\n    var_dump("当前host不被允许");\n  } else {\n    $request_path = str_replace("/index.php", "", $_SERVER["PHP_SELF"]);\n    $request_query = getCurrentQuery();\n    if(array_key_exists($request_path, $router)){\n      $module_file = BASEPATH . $router[$request_path]["file_name"];\n      $class_name = $router[$request_path]["class_name"];\n      $method_name = $router[$request_path]["method_name"];\n      if(file_exists($module_file)){\n        include $module_file;\n        $obj_module = new $class_name();\n        if(!method_exists($obj_module, $method_name)){\n          die("要调用的方法不存在");\n        } else {\n          if(is_callable(array($obj_module, $method_name))){\n            $obj_module->$method_name($request_query, $_POST);\n          }\n        }\n      } else{\n        die("定义的模块不存在");\n      }\n    } else {\n      echo "页面不存在";\n    }\n  }\n')])])]),n("h2",{attrs:{id:"thinkphp5-之-route"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#thinkphp5-之-route"}},[e._v("#")]),e._v(" ThinkPHP5 之 route")]),e._v(" "),n("p",[e._v("有三种模式")]),e._v(" "),n("ul",[n("li",[e._v("PATH_INFO")]),e._v(" "),n("li",[e._v("混合")]),e._v(" "),n("li",[e._v("强制使用路由模式(推荐)\n模式的配置在"),n("code",[e._v("application")]),e._v("的"),n("code",[e._v("config.php")]),e._v("里")])]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("// 混合模式\nurl_route_on => true,\n// 强制启用路由模式\nurl_route_must => true,\n")])])]),n("h3",{attrs:{id:"path-info"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#path-info"}},[e._v("#")]),e._v(" PATH_INFO")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("<?php\n  return [\n      '__pattern__' => [\n          'name' => '\\w+',\n      ],\n      '[hello]'     => [\n          ':id'   => ['index/hello', ['method' => 'get'], ['id' => '\\d+']],\n          ':name' => ['index/hello', ['method' => 'post']],\n      ],\n  ];\n")])])]),n("h3",{attrs:{id:"使用路由模式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用路由模式"}},[e._v("#")]),e._v(" 使用路由模式")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('use think\\Route;\n// Route::rule("路由表达式", "路由地址", "请求类型", "路由参数(数组)", "变量规则(数组)");\n// GET POST DELETE PUT * (默认为*)\n// 简写\n// Route::get(...);\n// 路由参数["https"=>true]\nRoute::get("hello", "sample/Test/hello");\n')])])])])}),[],!1,null,null,null);t.default=s.exports}}]);