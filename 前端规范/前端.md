# 前端开发规范

## 目录

- [1. 代码风格规范](#1-代码风格规范)
- [2. 命名规范](#2-命名规范)
- [3. HTML 规范](#3-html规范)
- [4. CSS/SCSS 规范](#4-cssscss规范)
- [5. JavaScript/TypeScript 规范](#5-javascripttypescript规范)
- [6. Vue/React 组件规范](#6-vuereact组件规范)
- [7. 项目结构规范](#7-项目结构规范)
- [8. Git 提交规范](#8-git提交规范)
- [9. 注释规范](#9-注释规范)
- [10. 性能优化规范](#10-性能优化规范)

---

## 1. 代码风格规范

### 1.1 缩进与格式

- 使用 **2 个空格** 进行缩进，禁止使用 Tab
- 每行代码长度不超过 **120 个字符**
- 文件末尾保留一个空行
- 使用 UTF-8 编码

### 1.2 分号

- JavaScript/TypeScript 代码**必须**使用分号结尾

### 1.3 引号

- JavaScript/TypeScript 优先使用**单引号** `'`
- HTML 属性使用**双引号** `"`
- 模板字符串使用反引号 `` ` ``

### 1.4 空格规范

```javascript
// ✅ 正确
const foo = (a, b) => {
  return a + b;
};

// ❌ 错误
const foo = (a, b) => {
  return a + b;
};
```

---

## 2. 命名规范

### 2.1 变量命名

- **小驼峰命名法** (camelCase): 普通变量、函数
- **大驼峰命名法** (PascalCase): 类、组件、构造函数
- **全大写下划线** (UPPER_CASE): 常量

```javascript
// 变量
const userName = 'John';
const userId = 123;

// 函数
function getUserInfo() {}

// 类/组件
class UserService {}
const UserProfile = () => {};

// 常量
const MAX_COUNT = 100;
const API_BASE_URL = 'https://api.example.com';
```

### 2.2 文件命名

- **组件文件**: PascalCase，如 `UserProfile.vue`, `Header.tsx`
- **工具/配置文件**: kebab-case，如 `utils.js`, `http-client.js`
- **样式文件**: kebab-case，如 `common-style.css`, `user-profile.scss`

### 2.3 CSS 类名

- 使用 **BEM 命名法** 或 **kebab-case**

```css
/* BEM */
.user-card {
}
.user-card__header {
}
.user-card__header--active {
}

/* kebab-case */
.user-profile {
}
.main-content {
}
```

---

## 3. HTML 规范

### 3.1 语义化标签

- 优先使用语义化 HTML5 标签

```html
<!-- ✅ 正确 -->
<header>
  <nav>导航</nav>
</header>
<main>
  <article>文章内容</article>
  <aside>侧边栏</aside>
</main>
<footer>页脚</footer>

<!-- ❌ 错误 -->
<div class="header">
  <div class="nav">导航</div>
</div>
```

### 3.2 属性顺序

1. class
2. id, name
3. data-\*
4. src, for, type, href, value
5. title, alt
6. role, aria-\*

```html
<a class="btn btn-primary" id="submit-btn" data-action="submit" href="#" title="提交"> 提交 </a>
```

### 3.3 其他规范

- 标签必须闭合
- 属性值使用双引号
- 不要省略可选的闭合标签（如 `</li>`, `</body>`）

---

## 4. CSS/SCSS 规范

### 4.1 选择器

- 避免使用 ID 选择器
- 选择器嵌套不超过 **3 层**
- 避免使用标签选择器（除非必要）

```scss
// ✅ 正确
.user-card {
  .header {
    .title {
    }
  }
}

// ❌ 错误 - 嵌套过深
.user-card {
  .header {
    .content {
      .title {
        .text {
        }
      }
    }
  }
}
```

### 4.2 属性顺序

1. 定位属性: `position`, `top`, `right`, `z-index`
2. 盒模型: `display`, `width`, `height`, `margin`, `padding`
3. 文本属性: `font`, `line-height`, `color`, `text-align`
4. 视觉属性: `background`, `border`, `opacity`
5. 其他: `transition`, `animation`

```css
.element {
  /* 定位 */
  position: absolute;
  top: 0;
  left: 0;
  z-index: 10;

  /* 盒模型 */
  display: flex;
  width: 100px;
  height: 100px;
  margin: 10px;
  padding: 10px;

  /* 文本 */
  font-size: 14px;
  color: #333;

  /* 视觉 */
  background: #fff;
  border: 1px solid #ddd;

  /* 其他 */
  transition: all 0.3s;
}
```

### 4.3 使用 CSS 变量

```css
:root {
  --primary-color: #1890ff;
  --success-color: #52c41a;
  --danger-color: #ff4d4f;
  --font-size-base: 14px;
}

.button {
  color: var(--primary-color);
  font-size: var(--font-size-base);
}
```

---

## 5. JavaScript/TypeScript 规范

### 5.1 变量声明

- 优先使用 `const`，需要重新赋值时使用 `let`
- **禁止**使用 `var`

```javascript
// ✅ 正确
const API_URL = 'https://api.example.com';
let count = 0;

// ❌ 错误
var userName = 'John';
```

### 5.2 函数

- 优先使用箭头函数
- 函数应该只做一件事
- 函数参数不超过 3 个，超过则使用对象传参

```javascript
// ✅ 正确
const getUserInfo = (userId) => {
  return api.get(`/users/${userId}`);
};

const createUser = ({ name, email, age }) => {
  // 创建用户逻辑
};

// ❌ 错误
function createUser(name, email, age, phone, address, city) {
  // 参数过多
}
```

### 5.3 对象和数组

- 使用对象字面量和数组字面量
- 使用解构赋值
- 使用扩展运算符

```javascript
// ✅ 正确
const user = { name: 'John', age: 30 };
const { name, age } = user;
const newUser = { ...user, email: 'john@example.com' };

const arr = [1, 2, 3];
const newArr = [...arr, 4, 5];

// ❌ 错误
const user = new Object();
user.name = 'John';
```

### 5.4 异步处理

- 优先使用 `async/await` 而不是 Promise 链
- 必须处理错误

```javascript
// ✅ 正确
const fetchUserData = async (userId) => {
  try {
    const response = await api.get(`/users/${userId}`);
    return response.data;
  } catch (error) {
    console.error('获取用户数据失败:', error);
    throw error;
  }
};

// ❌ 错误
const fetchUserData = (userId) => {
  return api
    .get(`/users/${userId}`)
    .then((response) => response.data)
    .then((data) => processData(data))
    .then((result) => doSomething(result));
};
```

### 5.5 TypeScript 类型

- 避免使用 `any`，优先使用具体类型或 `unknown`
- 使用接口定义对象结构
- 使用类型别名定义联合类型

```typescript
// ✅ 正确
interface User {
  id: number;
  name: string;
  email: string;
  role: 'admin' | 'user';
}

type Status = 'pending' | 'success' | 'error';

const getUser = (id: number): Promise<User> => {
  return api.get(`/users/${id}`);
};

// ❌ 错误
const getUser = (id: any): any => {
  return api.get(`/users/${id}`);
};
```

---

## 6. Vue/React 组件规范

### 6.1 组件结构 (Vue)

```vue
<template>
  <!-- 模板内容 -->
</template>

<script>
// 1. 导入依赖
import { ref, computed, onMounted } from 'vue';

// 2. 定义Props类型
interface Props {
  title: string;
  count?: number;
}

// 3. 组件逻辑
export default {
  name: 'ComponentName',
  props: {
    // props定义
  },
  setup(props, { emit }) {
    // 4. 响应式数据
    const state = ref(0);

    // 5. 计算属性
    const doubleState = computed(() => state.value * 2);

    // 6. 方法
    const handleClick = () => {
      emit('click', state.value);
    };

    // 7. 生命周期
    onMounted(() => {
      // 初始化逻辑
    });

    // 8. 返回
    return {
      state,
      doubleState,
      handleClick,
    };
  },
};
</script>

<style scoped lang="scss">
/* 组件样式 */
</style>
```

### 6.2 组件结构 (React)

```tsx
import React, { useState, useEffect } from 'react';
import './ComponentName.scss';

interface ComponentNameProps {
  title: string;
  count?: number;
  onClick?: (value: number) => void;
}

const ComponentName: React.FC<ComponentNameProps> = ({ title, count = 0, onClick }) => {
  // 1. State
  const [state, setState] = useState(0);

  // 2. 副作用
  useEffect(() => {
    // 初始化逻辑
  }, []);

  // 3. 事件处理
  const handleClick = () => {
    onClick?.(state);
  };

  // 4. 渲染
  return (
    <div className="component-name">
      <h1>{title}</h1>
      <button onClick={handleClick}>Click</button>
    </div>
  );
};

export default ComponentName;
```

### 6.3 组件设计原则

- **单一职责**: 一个组件只做一件事
- **Props 向下，事件向上**: 父组件通过 props 传递数据，子组件通过事件通知父组件
- **可复用性**: 组件应该是可复用的，避免硬编码
- **组件大小**: 单个组件不超过 **300 行代码**，超过则拆分

---

## 7. 项目结构规范

### 7.1 目录结构

```
src/
├── assets/              # 静态资源
│   ├── images/
│   ├── fonts/
│   └── styles/
├── components/          # 公共组件
│   ├── Button/
│   ├── Modal/
│   └── index.ts
├── views/              # 页面组件
│   ├── Home/
│   ├── User/
│   └── index.ts
├── router/             # 路由配置
│   └── index.ts
├── store/              # 状态管理
│   ├── modules/
│   └── index.ts
├── api/                # API接口
│   ├── user.ts
│   └── index.ts
├── utils/              # 工具函数
│   ├── request.ts
│   ├── format.ts
│   └── index.ts
├── hooks/              # 自定义Hooks (React)
├── composables/        # 组合式函数 (Vue)
├── types/              # TypeScript类型定义
│   └── index.ts
├── constants/          # 常量定义
│   └── index.ts
├── App.vue/tsx
└── main.ts
```

### 7.2 文件组织

- 相关文件放在同一目录
- 组件目录包含：组件文件、样式文件、类型定义、测试文件

```
components/
└── Button/
    ├── Button.tsx
    ├── Button.scss
    ├── Button.test.tsx
    ├── types.ts
    └── index.ts
```

---

## 8. Git 提交规范

### 8.1 Commit Message 格式

```
<type>(<scope>): <subject>

<body>

<footer>
```

### 8.2 Type 类型

- `feat`: 新功能
- `fix`: 修复 bug
- `docs`: 文档修改
- `style`: 代码格式修改（不影响代码运行）
- `refactor`: 重构
- `perf`: 性能优化
- `test`: 测试相关
- `chore`: 构建过程或辅助工具的变动

### 8.3 示例

```
feat(user): 添加用户登录功能

- 实现用户名密码登录
- 添加Token存储
- 集成登录API

Closes #123
```

### 8.4 分支管理

- `main/master`: 主分支，保持稳定
- `develop`: 开发分支
- `feature/xxx`: 功能分支
- `fix/xxx`: 修复分支
- `hotfix/xxx`: 紧急修复分支

---

## 9. 注释规范

### 9.1 单行注释

```javascript
// 获取用户信息
const getUserInfo = () => {};
```

### 9.2 多行注释

```javascript
/**
 * 创建用户
 * @param {Object} userData - 用户数据
 * @param {string} userData.name - 用户名
 * @param {string} userData.email - 邮箱
 * @returns {Promise<User>} 返回创建的用户对象
 */
const createUser = async (userData) => {
  // 实现逻辑
};
```

### 9.3 TODO 注释

```javascript
// TODO: 优化性能
// FIXME: 修复边界情况
// NOTE: 这里需要注意...
// HACK: 临时解决方案
```

### 9.4 注释原则

- **代码即注释**: 优先通过清晰的命名和结构来表达意图
- **注释解释"为什么"**: 不是解释"是什么"
- **保持更新**: 修改代码时同步更新注释
- **避免废话**: 不要添加无意义的注释

```javascript
// ❌ 错误 - 无意义的注释
// 定义一个变量
const count = 0;

// ✅ 正确 - 解释业务逻辑
// 由于后端限制，每次最多只能请求100条数据
const MAX_REQUEST_SIZE = 100;
```

---

## 10. 性能优化规范

### 10.1 资源优化

- **图片**: 使用 WebP 格式，大图使用懒加载
- **代码分割**: 路由级别的代码分割
- **Tree Shaking**: 移除未使用的代码
- **压缩**: 生产环境启用 Gzip/Brotli 压缩

```javascript
// 路由懒加载
const Home = () => import('./views/Home.vue');
const User = () => import('./views/User.vue');
```

### 10.2 渲染优化

- 使用虚拟列表处理大数据量
- 避免不必要的重渲染（React.memo, Vue 的 computed）
- 使用防抖和节流

```javascript
// 防抖
import { debounce } from 'lodash-es';

const handleSearch = debounce((keyword) => {
  // 搜索逻辑
}, 300);

// 节流
import { throttle } from 'lodash-es';

const handleScroll = throttle(() => {
  // 滚动逻辑
}, 100);
```

### 10.3 网络优化

- **HTTP/2**: 使用 HTTP/2 协议
- **CDN**: 静态资源使用 CDN
- **缓存**: 合理使用浏览器缓存
- **预加载**: 关键资源使用 preload/prefetch

```html
<link rel="preload" href="font.woff2" as="font" type="font/woff2" crossorigin />
<link rel="prefetch" href="next-page.js" />
```

---

## 工具配置

### VSCode 配置

#### 推荐安装的插件

项目根目录已配置 `.vscode/extensions.json`，打开项目时 VSCode 会提示安装推荐插件：

- **Prettier** (`esbenp.prettier-vscode`) - 代码格式化
- **ESLint** (`dbaeumer.vscode-eslint`) - 代码检查
- **EditorConfig** (`editorconfig.editorconfig`) - 编辑器配置
- **Volar** (`vue.volar`) - Vue 支持
- **GitLens** (`eamodio.gitlens`) - Git 增强

#### 自动格式化设置

项目已配置自动保存和格式化，在 `.vscode/settings.json` 中：

```json
{
  "files.autoSave": "afterDelay", // 自动保存（1秒延迟）
  "editor.formatOnSave": true, // 保存时自动格式化
  "editor.defaultFormatter": "esbenp.prettier-vscode"
}
```

#### 使用方式

1. 打开项目时安装推荐的插件
2. 编辑文件后，代码会在 1 秒后自动保存
3. 保存时会自动使用 Prettier 格式化代码
4. ESLint 会实时检查代码问题

### ESLint 配置示例

```json
{
  "extends": ["eslint:recommended", "plugin:@typescript-eslint/recommended", "plugin:vue/vue3-recommended"],
  "rules": {
    "indent": ["error", 2],
    "quotes": ["error", "single"],
    "semi": ["error", "always"],
    "no-console": "warn",
    "no-unused-vars": "error"
  }
}
```

### Prettier 配置（.prettierrc.json）

项目已配置好 Prettier，主要规则：

```json
{
  "semi": true, // 使用分号
  "singleQuote": true, // 使用单引号
  "tabWidth": 2, // 缩进 2 个空格
  "trailingComma": "es5", // 尾随逗号
  "printWidth": 120, // 每行最大 120 字符
  "arrowParens": "always" // 箭头函数参数始终加括号
}
```

### EditorConfig 配置

项目已配置 `.editorconfig` 文件，统一不同编辑器的代码风格：

```ini
[*]
charset = utf-8
end_of_line = lf
insert_final_newline = true
trim_trailing_whitespace = true

[*.{js,jsx,ts,tsx,vue}]
indent_style = space
indent_size = 2
```

---

## 总结

遵循以上规范可以：

- ✅ 提高代码质量和可维护性
- ✅ 提升团队协作效率
- ✅ 减少 bug 和技术债
- ✅ 统一代码风格
- ✅ 更好的性能表现

**记住：规范不是束缚，而是为了写出更好的代码！**
